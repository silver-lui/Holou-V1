{% load static %}
<!DOCTYPE html>
<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Holou - Your AI Productivity Companion</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;family=Orbitron:wght@700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<style type="text/tailwindcss">
        :root {
            --background-rgb: 11, 12, 16;
            --glow-purple-rgb: 123, 92, 255;
            --glow-cyan-rgb: 56, 189, 248;
        }
        body {
            background-color: #0b0c10;
        }
        .animated-gradient-glow::before {
            content: "";
            position: absolute;
            left: 50%;
            top: 50%;
            width: 40rem;
            height: 40rem;
            transform: translate(-50%, -50%);
            background-image: radial-gradient(circle at center, rgba(var(--glow-purple-rgb), 0.2), transparent 70%);
            z-index: -1;
        }
        .glow-particle-container {
            position: absolute;
            inset: 0;
            overflow: hidden;
            z-index: -2;
        }
        .glow-particle {
            position: absolute;
            border-radius: 9999px;
            filter: blur(20px);
            opacity: 0.1;
        }
        .glow-particle-1 {
            width: 500px;
            height: 500px;
            top: -10%;
            left: -15%;
            background-color: rgba(var(--glow-purple-rgb), 0.5);
        }
        .glow-particle-2 {
            width: 400px;
            height: 400px;
            top: 20%;
            right: -20%;
            background-color: rgba(var(--glow-cyan-rgb), 0.5);
        }
        .glow-particle-3 {
            width: 350px;
            height: 350px;
            bottom: 5%;
            left: 30%;
            background-color: rgba(var(--glow-purple-rgb), 0.4);
        }
        @keyframes pulse-light {
            0%, 100% {
                box-shadow: 0 0 8px theme('colors.purple.500 / 50%');
            }
            50% {
                box-shadow: 0 0 20px theme('colors.purple.500 / 70%');
            }
        }
        .pulse-badge {
            animation: pulse-light 3s ease-in-out infinite;
        }
        @keyframes typing {
          from { width: 0 }
          to { width: 100% }
        }
        .typing-animation::after {
          content: '‚ñã';
          animation: blink-caret .75s step-end infinite;
          color: #7B5CFF;
        }
        @keyframes blink-caret {
          from, to { opacity: 0 }
          50% { opacity: 1 }
        }
        @keyframes slideInUp {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .message-animate {
          animation: slideInUp 0.3s ease-out;
        }
        @keyframes shimmer {
          0% {
            background-position: -1000px 0;
          }
          100% {
            background-position: 1000px 0;
          }
        }
        .typing-indicator {
          display: inline-flex;
          gap: 4px;
        }
        .typing-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: #7B5CFF;
          animation: typing-bounce 1.4s infinite;
        }
        .typing-dot:nth-child(2) {
          animation-delay: 0.2s;
        }
        .typing-dot:nth-child(3) {
          animation-delay: 0.4s;
        }
        @keyframes typing-bounce {
          0%, 60%, 100% {
            transform: translateY(0);
            opacity: 0.7;
          }
          30% {
            transform: translateY(-10px);
            opacity: 1;
          }
        }
    </style>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        purple: { 
                          DEFAULT: "#7B5CFF",
                          '500': '#7B5CFF'
                        },
                        cyan: {
                          DEFAULT: "#38BDF8",
                          '400': "#38BDF8"
                        },
                        background: "#0b0c10",
                        "text-soft": "#E4E4E7",
                        "text-muted": "#A1A1AA",
                    },
                    fontFamily: {
                        sans: ["Inter", "sans-serif"],
                        display: ["Orbitron", "sans-serif"]
                    },
                    boxShadow: {
                        'glow-purple': '0 0 25px rgba(123, 92, 255, 0.5)',
                        'glow-cyan': '0 0 25px rgba(56, 189, 248, 0.5)',
                        'feature-hover': '0 0 20px rgba(123, 92, 255, 0.2)',
                    },
                    borderColor: {
                        'white-10': 'rgba(255, 255, 255, 0.1)',
                    }
                },
            },
        }
    </script>
</head>
<body class="bg-background font-sans text-text-soft antialiased">
<div class="relative min-h-screen w-full flex flex-col overflow-x-hidden">
<div class="glow-particle-container">
<div class="glow-particle glow-particle-1"></div>
<div class="glow-particle glow-particle-2"></div>
<div class="glow-particle glow-particle-3"></div>
</div>
<div class="flex h-full grow flex-col">
<div class="flex flex-1 justify-center py-5">
<div class="w-full max-w-6xl px-4 sm:px-6 lg:px-8">
<header class="flex items-center justify-between whitespace-nowrap border-b border-white-10 py-4">
<div class="flex items-center gap-3 text-white">
<div class="size-8">
<img alt="Holou Logo" class="h-full w-full object-contain" src="{% static 'Holou-Logo.png' %}"/>
</div>
<h2 class="text-2xl font-bold font-display leading-tight tracking-tight text-text-soft">Holou</h2>
</div>
<a href="{% url 'wishlist_signup' %}" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-purple text-white text-sm font-semibold transition-all hover:bg-purple/90 hover:shadow-glow-purple">
<span class="truncate">Join Waitlist</span>
</a>
</header>
<main class="flex-1">
<section class="py-24 sm:py-32 text-center relative">
<div class="flex flex-col items-center gap-6 relative z-10">
<div class="inline-flex items-center justify-center rounded-full bg-purple/10 px-4 py-1.5 text-sm font-semibold text-purple border border-purple/30 pulse-badge">Coming Soon</div>
<h1 class="text-4xl sm:text-6xl md:text-7xl font-bold font-display leading-tight tracking-tight text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-400 relative animated-gradient-glow">
                                Your AI Productivity Companion.
                            </h1>
<p class="text-text-muted text-base sm:text-lg max-w-2xl">
                                Plan smarter days with AI-generated to-do lists, goals, and daily schedules.
                            </p>
<div class="flex flex-wrap gap-4 justify-center mt-6">
<button id="try-demo-chat-btn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-white/5 text-white backdrop-blur-sm border border-white-10 text-base font-semibold transition-all hover:bg-white/10 hover:border-white/20">
<span class="truncate">Try Demo Chat</span>
</button>
<button id="create-avatar-btn-hero" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-purple text-white text-base font-semibold transition-all hover:bg-purple/90 hover:shadow-glow-purple">
<span class="truncate">Create Your Avatar</span>
</button>
</div>
</div>
</section>
<section id="chat-section" class="py-16 sm:py-20 group">
<div class="relative max-w-4xl mx-auto">
<div class="absolute -inset-0.5 bg-gradient-to-br from-purple/40 to-cyan/20 rounded-xl blur-lg opacity-40 transition-opacity duration-500 group-hover:opacity-75"></div>
<div class="relative bg-background/80 backdrop-blur-lg border border-white-10 rounded-xl overflow-hidden">
<div class="absolute top-0 left-0 w-full h-full bg-grid-white/[0.03] [mask-image:linear-gradient(to_bottom,white_10%,transparent_90%)]"></div>
<div class="relative z-10 flex flex-col h-full">
<div class="p-4 sm:p-6 border-b border-white-10 flex items-center justify-between bg-gradient-to-r from-black/40 via-black/30 to-black/40 backdrop-blur-sm">
<div class="flex items-center gap-3">
<div class="size-10 shrink-0 rounded-lg bg-gradient-to-br from-purple/20 to-cyan/10 p-1.5 border border-purple/30 shadow-[0_0_15px_theme('colors.purple.DEFAULT/20%')]">
<img alt="Holou Logo" class="h-full w-full object-contain" src="{% static 'Holou-Logo.png' %}"/>
</div>
<div>
<h3 class="text-white font-bold text-lg font-display">Holou AI Assistant</h3>
<p class="text-xs text-text-muted">Always here to help</p>
</div>
</div>
<div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-green-500/10 border border-green-500/30">
<span class="relative flex h-2.5 w-2.5">
<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
<span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500 border border-green-300"></span>
</span>
<span class="text-xs font-medium text-green-400">Online</span>
</div>
</div>
<div id="chat-messages" class="flex-grow min-h-[24rem] max-h-[32rem] p-6 space-y-4 overflow-y-auto bg-gradient-to-b from-background/50 to-background scrollbar-thin scrollbar-thumb-purple/30 scrollbar-track-transparent">
<!-- Messages will be dynamically added here -->
</div>
<div class="p-4 sm:p-6 bg-gradient-to-t from-black/50 to-black/30 border-t border-white/10 backdrop-blur-sm">
<div class="relative flex items-end gap-3">
<div class="flex-1 relative">
<input id="chat-input" maxlength="200" class="w-full bg-black/40 border border-white/10 rounded-xl h-12 px-4 pr-12 text-text-soft placeholder-text-muted focus:ring-2 focus:ring-purple focus:border-purple transition-all backdrop-blur-sm" placeholder="Ask Holou anything..." type="text"/>
<div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2">
<span id="char-counter" class="text-xs text-text-muted">0/200</span>
<button id="attach-btn" class="p-1.5 rounded-lg hover:bg-white/5 transition-colors" title="Attach file">
<span class="material-symbols-outlined text-text-muted text-lg">attach_file</span>
</button>
</div>
</div>
<button id="send-btn" class="flex items-center justify-center shrink-0 size-12 rounded-xl bg-gradient-to-br from-purple to-purple/80 text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-glow-purple hover:scale-105 active:scale-95 shadow-lg">
<span class="material-symbols-outlined text-xl">send</span>
</button>
</div>
<div class="flex items-center justify-between mt-3">
<div class="flex items-center gap-4 text-xs text-text-muted">
<button id="ai-suggestions-btn" class="flex items-center gap-1.5 hover:text-purple transition-colors">
<span class="material-symbols-outlined text-sm">auto_awesome</span>
<span>AI Suggestions</span>
</button>
<button id="chat-history-btn" class="flex items-center gap-1.5 hover:text-cyan transition-colors">
<span class="material-symbols-outlined text-sm">history</span>
<span>Chat History</span>
</button>
</div>
<div class="text-xs text-text-muted italic">
Demo: 200 char limit
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="py-16 sm:py-20">
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
<div class="relative bg-background/50 p-6 rounded-xl border border-white-10 transition-all duration-300 hover:border-purple/50 hover:-translate-y-1 hover:shadow-feature-hover overflow-hidden">
<div class="absolute -inset-px rounded-xl bg-gradient-to-br from-purple/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
<div class="relative z-10">
<span class="material-symbols-outlined text-3xl mb-4 text-purple">calendar_month</span>
<h3 class="text-white font-semibold text-lg mb-2">AI Daily Planner</h3>
<p class="text-text-muted text-sm">Automatically generate optimized daily schedules based on your goals and priorities.</p>
</div>
</div>
<div class="relative bg-background/50 p-6 rounded-xl border border-white-10 transition-all duration-300 hover:border-purple/50 hover:-translate-y-1 hover:shadow-feature-hover overflow-hidden">
<div class="absolute -inset-px rounded-xl bg-gradient-to-br from-purple/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
<div class="relative z-10">
<span class="material-symbols-outlined text-3xl mb-4 text-purple">bolt</span>
<h3 class="text-white font-semibold text-lg mb-2">Task Prioritization</h3>
<p class="text-text-muted text-sm">Our AI helps you focus on what matters most by intelligently ranking your tasks.</p>
</div>
</div>
<div class="relative bg-background/50 p-6 rounded-xl border border-white-10 transition-all duration-300 hover:border-purple/50 hover:-translate-y-1 hover:shadow-feature-hover overflow-hidden">
<div class="absolute -inset-px rounded-xl bg-gradient-to-br from-purple/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
<div class="relative z-10">
<span class="material-symbols-outlined text-3xl mb-4 text-purple">flag</span>
<h3 class="text-white font-semibold text-lg mb-2">Goal Tracking</h3>
<p class="text-text-muted text-sm">Set long-term goals and let Holou break them down into manageable daily actions.</p>
</div>
</div>
<div class="relative bg-background/50 p-6 rounded-xl border border-white-10 transition-all duration-300 hover:border-purple/50 hover:-translate-y-1 hover:shadow-feature-hover overflow-hidden">
<div class="absolute -inset-px rounded-xl bg-gradient-to-br from-purple/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
<div class="relative z-10">
<span class="material-symbols-outlined text-3xl mb-4 text-purple">notifications_active</span>
<h3 class="text-white font-semibold text-lg mb-2">Smart Reminders</h3>
<p class="text-text-muted text-sm">Get timely, context-aware reminders so you never miss an important deadline.</p>
</div>
</div>
<div class="relative bg-background/50 p-6 rounded-xl border border-white-10 transition-all duration-300 hover:border-purple/50 hover:-translate-y-1 hover:shadow-feature-hover overflow-hidden">
<div class="absolute -inset-px rounded-xl bg-gradient-to-br from-purple/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
<div class="relative z-10">
<span class="material-symbols-outlined text-3xl mb-4 text-purple">cloud_sync</span>
<h3 class="text-white font-semibold text-lg mb-2">Cross-Platform Sync</h3>
<p class="text-text-muted text-sm">Access your plans and tasks seamlessly across all your devices, anytime.</p>
</div>
</div>
<div class="relative bg-background/50 p-6 rounded-xl border border-white-10 transition-all duration-300 hover:border-purple/50 hover:-translate-y-1 hover:shadow-feature-hover overflow-hidden">
<div class="absolute -inset-px rounded-xl bg-gradient-to-br from-purple/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
<div class="relative z-10">
<span class="material-symbols-outlined text-3xl mb-4 text-purple">psychology</span>
<h3 class="text-white font-semibold text-lg mb-2">Adaptive Learning</h3>
<p class="text-text-muted text-sm">Holou learns your work habits and suggests improvements to your workflow over time.</p>
</div>
</div>
</div>
</section>
<section class="py-16 sm:py-20">
<div class="relative bg-background/50 border border-white-10 rounded-2xl p-8 sm:p-12 overflow-hidden">
<div class="absolute -inset-px rounded-2xl bg-gradient-to-br from-purple/20 via-cyan/10 to-transparent -z-10"></div>
<div class="grid md:grid-cols-2 gap-12 items-center">
<div class="text-center md:text-left">
<h2 class="text-3xl sm:text-4xl font-bold font-display leading-tight tracking-tight mb-4 text-white">Build Your Digital Persona.</h2>
<p class="text-text-muted max-w-md mx-auto md:mx-0">Design your Holou persona ‚Äî your AI representation in our ecosystem.</p>
<button id="create-avatar-btn-section" class="inline-flex items-center justify-center gap-2 mt-8 rounded-lg h-12 px-6 bg-purple text-white text-base font-semibold transition-all hover:bg-purple/90 hover:shadow-glow-purple">
                                        Create Your Avatar <span class="material-symbols-outlined">arrow_forward</span>
</button>
</div>
<div class="relative h-64">
<img alt="Vector avatars" class="absolute inset-0 w-full h-full object-contain object-center" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAYTeBKDe-WoYY4OqXFSeW9whXBl0d1G7Hpwf_27lcCVLO0sSPUmd79Oec2wdOw-rzp9me4zhFlmkpKb3TOQiOqG03cegK0vfPP6ZZGAsyOCzwbhYfgwJjgqR1ZQJJ1yYQ_xk2w9XOPGE6JNkwH0rXpOLv9wVhOMC75_RX7doo7jO1DLZIsJsa10OZ8LpWewFGBrpEzZ0w4SfMrS25vqFyu18OgQKYRDDBpujIL5JitcWuyYHGXUdckxMr-d90Juc_k9Y3sjI--7X8"/>
</div>
</div>
</div>
</section>
<section class="py-16 sm:py-20 grid grid-cols-1 md:grid-cols-2 gap-8">
<div class="relative bg-background/50 p-8 rounded-2xl border border-white-10">
<div class="absolute -inset-px rounded-2xl bg-gradient-to-br from-purple/10 to-transparent -z-10"></div>
<div class="text-center">
<h2 class="text-white text-2xl font-bold font-display tracking-tight">Tell us what you think.</h2>
</div>
<form id="feedback-form" class="mt-8 space-y-4">
<textarea id="feedback-text" name="feedback" required class="w-full bg-black/20 border border-white-10 rounded-lg p-4 text-text-soft placeholder-text-muted focus:ring-2 focus:ring-purple focus:border-purple transition-all resize-none" placeholder="Share your thoughts..." rows="4"></textarea>
<div id="feedback-message" class="hidden text-sm"></div>
<button type="submit" class="w-full flex items-center justify-center rounded-lg h-11 px-6 bg-purple text-white text-base font-semibold transition-all hover:bg-purple/90 hover:shadow-glow-purple">
                                    Submit
                                </button>
</form>
</div>
<div class="relative bg-background/50 p-8 rounded-2xl border border-white-10">
<div class="absolute -inset-px rounded-2xl bg-gradient-to-br from-cyan/10 to-transparent -z-10"></div>
<div class="text-center">
<h2 class="text-white text-2xl font-bold font-display tracking-tight">Partner with Holou.</h2>
</div>
<form id="partner-form" class="mt-8 space-y-4">
<input id="partner-email" name="email" required class="w-full bg-black/20 border border-white-10 rounded-lg h-11 px-4 text-text-soft placeholder-text-muted focus:ring-2 focus:ring-cyan focus:border-cyan transition-all" placeholder="your@email.com" type="email"/>
<div id="partner-message" class="hidden text-sm"></div>
<button type="submit" class="w-full flex items-center justify-center rounded-lg h-11 px-6 bg-cyan text-black text-base font-semibold transition-all hover:bg-cyan/90 hover:shadow-glow-cyan">
                                    Submit
                                </button>
</form>
</div>
</section>
<section class="py-16 sm:py-20 text-center">
<div class="mb-12">
<h2 class="text-white text-3xl sm:text-4xl font-bold font-display leading-tight tracking-tight">Get Holou</h2>
</div>
<div class="flex flex-wrap justify-center gap-6">
<button class="relative group flex items-center gap-3 min-w-[160px] justify-center rounded-lg h-12 px-5 bg-white/5 text-text-muted text-base font-semibold transition-colors cursor-not-allowed">
<span class="material-symbols-outlined">desktop_windows</span> Windows
                                <span class="absolute -top-2 -right-2 bg-purple/20 text-purple text-xs font-semibold px-2 py-0.5 rounded-full border border-purple/30">Coming Soon</span>
</button>
<button class="relative group flex items-center gap-3 min-w-[160px] justify-center rounded-lg h-12 px-5 bg-white/5 text-text-muted text-base font-semibold transition-colors cursor-not-allowed">
<span class="material-symbols-outlined">laptop_mac</span> macOS
                                <span class="absolute -top-2 -right-2 bg-purple/20 text-purple text-xs font-semibold px-2 py-0.5 rounded-full border border-purple/30">Coming Soon</span>
</button>
<button class="relative group flex items-center gap-3 min-w-[160px] justify-center rounded-lg h-12 px-5 bg-white/5 text-text-muted text-base font-semibold transition-colors cursor-not-allowed">
<span class="material-symbols-outlined">neurology</span> Linux
                                <span class="absolute -top-2 -right-2 bg-purple/20 text-purple text-xs font-semibold px-2 py-0.5 rounded-full border border-purple/30">Coming Soon</span>
</button>
</div>
</section>
</main>
<footer class="border-t border-white-10 mt-16 py-8">
<div class="flex flex-col sm:flex-row justify-between items-center gap-6">
<p class="text-text-muted text-sm">¬© Holou 2025</p>
<div class="flex gap-5">
<a class="text-text-muted hover:text-white transition-colors" href="#">
<svg aria-hidden="true" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
<path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
</svg>
</a>
<a class="text-text-muted hover:text-white transition-colors" href="#">
<svg aria-hidden="true" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
<path clip-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12.014c0 4.438 2.865 8.229 6.838 9.574.5.092.682-.217.682-.482 0-.237-.009-1.02-.013-1.862-2.782.605-3.369-1.21-3.369-1.21-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12.014C22 6.477 17.523 2 12 2z" fill-rule="evenodd"></path>
</svg>
</a>
<a class="text-text-muted hover:text-white transition-colors" href="#">
<svg aria-hidden="true" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
<path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path>
</svg>
</a>
</div>
</div>
</footer>
</div>
</div>
</div>
</div>

<script>
let chatState = {
    currentQuestion: null,
    conversationStarted: false
};

const chatMessages = document.getElementById('chat-messages');
const chatInput = document.getElementById('chat-input');
const sendBtn = document.getElementById('send-btn');

// Initialize chat
async function initChat() {
    try {
        const response = await fetch('/api/chat/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({
                type: 'init'
            })
        });
        
        const data = await response.json();
        if (data.response) {
            addAIMessage(data.response);
            chatState.currentQuestion = data.next_question;
            chatState.conversationStarted = true;
        }
    } catch (error) {
        addAIMessage("Hello! I'm Holou, your AI Productivity Companion. Let's create a personalized learning plan for your project! üöÄ\n\n‚ö†Ô∏è This is a demo version with a 200 character limit per message. Please keep your responses concise!\n‚ö†Ô∏è also consider that the demo version generates only 7 days basic plan.\n\nWhat project would you like to build?");
        chatState.currentQuestion = 'project_description';
        chatState.conversationStarted = true;
    }
}

// Add user message
function addUserMessage(text) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'flex items-start gap-3 justify-end message-animate';
    messageDiv.innerHTML = `
        <div class="flex flex-col items-end max-w-[75%] sm:max-w-[65%]">
            <div class="bg-gradient-to-br from-purple/30 to-purple/20 rounded-2xl rounded-tr-none p-4 border border-purple/40 shadow-[0_4px_12px_theme('colors.purple.DEFAULT/15%')]">
                <p class="text-sm text-white leading-relaxed whitespace-pre-wrap">${escapeHtml(text)}</p>
            </div>
            <span class="text-xs text-text-muted mt-1.5 px-2">Just now</span>
        </div>
        <div class="size-8 rounded-full bg-gradient-to-br from-purple to-cyan flex items-center justify-center shrink-0 border-2 border-purple/50 shadow-[0_0_10px_theme('colors.purple.DEFAULT/30%')]">
            <span class="text-white text-xs font-bold">U</span>
        </div>
    `;
    chatMessages.appendChild(messageDiv);
    scrollToBottom();
}

// Add AI message
function addAIMessage(text, showTyping = false) {
    if (showTyping) {
        const typingDiv = document.createElement('div');
        typingDiv.id = 'typing-indicator';
        typingDiv.className = 'flex items-start gap-3 message-animate';
        typingDiv.innerHTML = `
            <div class="size-9 rounded-full bg-gradient-to-br from-purple/30 to-cyan/20 flex items-center justify-center shrink-0 border-2 border-purple/40 shadow-[0_0_15px_theme('colors.purple.DEFAULT/25%')]">
                <img alt="Holou Logo" class="h-6 w-6 object-contain" src="{% static 'Holou-Logo.png' %}"/>
            </div>
            <div class="bg-white/5 rounded-2xl rounded-tl-none p-4 border border-white/10 backdrop-blur-sm">
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        `;
        chatMessages.appendChild(typingDiv);
        scrollToBottom();
        return typingDiv;
    } else {
        // Remove typing indicator if exists
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) {
            typingIndicator.remove();
        }
        
        const messageDiv = document.createElement('div');
        messageDiv.className = 'flex items-start gap-3 message-animate';
        messageDiv.innerHTML = `
            <div class="size-9 rounded-full bg-gradient-to-br from-purple/30 to-cyan/20 flex items-center justify-center shrink-0 border-2 border-purple/40 shadow-[0_0_15px_theme('colors.purple.DEFAULT/25%')]">
                <img alt="Holou Logo" class="h-6 w-6 object-contain" src="{% static 'Holou-Logo.png' %}"/>
            </div>
            <div class="flex flex-col gap-2 max-w-[75%] sm:max-w-[65%]">
                <div class="bg-white/5 rounded-2xl rounded-tl-none p-4 border border-white/10 backdrop-blur-sm">
                    <p class="text-sm text-text-soft leading-relaxed whitespace-pre-wrap">${escapeHtml(text)}</p>
                </div>
                <span class="text-xs text-text-muted px-2">Just now</span>
            </div>
        `;
        chatMessages.appendChild(messageDiv);
        scrollToBottom();
        return messageDiv;
    }
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

function scrollToBottom() {
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

// Send message
async function sendMessage() {
    const message = chatInput.value.trim();
    if (!message) return;
    
    // Check character limit
    if (message.length > 200) {
        addAIMessage("‚ö†Ô∏è Your message exceeds the 200 character limit for this demo version. Please shorten your message.");
        return;
    }
    
    // Disable input
    chatInput.disabled = true;
    sendBtn.disabled = true;
    
    // Add user message
    addUserMessage(message);
    chatInput.value = '';
    updateCharCounter(); // Update counter after clearing
    
    // Show typing indicator
    const typingIndicator = addAIMessage('', true);
    
    try {
        const response = await fetch('/api/chat/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({
                type: chatState.currentQuestion || 'init',
                message: message
            })
        });
        
        const data = await response.json();
        
        // Remove typing indicator
        if (typingIndicator) {
            typingIndicator.remove();
        }
        
        if (data.error) {
            addAIMessage(`Sorry, an error occurred: ${data.error}`);
        } else if (data.status === 'success' && data.redirect_url) {
            addAIMessage(data.response);
            setTimeout(() => {
                window.location.href = data.redirect_url;
            }, 800);
        } else {
            addAIMessage(data.response);
            chatState.currentQuestion = data.next_question;
            
            // If generating, trigger generation immediately
            if (data.next_question === 'generating') {
                generatePlan();
            }
        }
    } catch (error) {
        if (typingIndicator) {
            typingIndicator.remove();
        }
        addAIMessage('Sorry, there was an error. Please try again.');
        console.error('Error:', error);
    } finally {
        chatInput.disabled = false;
        sendBtn.disabled = false;
        chatInput.focus();
    }
}

// Generate plan
async function generatePlan() {
    const typingIndicator = addAIMessage('', true);
    
    try {
        // Create AbortController for timeout handling
        // Set to 4 minutes (240 seconds) to give plenty of buffer - backend timeout is 3 minutes
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 240000); // 240 seconds (4 minutes) - generous buffer for 3 minute backend
        
        const response = await fetch('/api/chat/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({
                type: 'generate'
            }),
            signal: controller.signal
        });
        
        clearTimeout(timeoutId);
        const data = await response.json();
        
        if (typingIndicator) {
            typingIndicator.remove();
        }
        
        if (data.error) {
            addAIMessage(`Sorry, an error occurred: ${data.error}`);
        } else if (data.status === 'success' && data.redirect_url) {
            addAIMessage(data.response);
            setTimeout(() => {
                window.location.href = data.redirect_url;
            }, 800);
        } else {
            addAIMessage(data.response || 'Plan generation completed!');
        }
    } catch (error) {
        if (typingIndicator) {
            typingIndicator.remove();
        }
        
        if (error.name === 'AbortError') {
            // This should rarely happen now with 5 minute timeout, but if it does, show helpful message
            addAIMessage('Generation is taking longer than expected. The system is still working on your plan. Please wait a bit longer or refresh the page to check status.');
        } else {
            addAIMessage('Sorry, there was an error generating your plan. Please try again.');
        }
        console.error('Error:', error);
    }
}

// Get CSRF token
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

// Update character counter
function updateCharCounter() {
    const charCounter = document.getElementById('char-counter');
    const currentLength = chatInput.value.length;
    const maxLength = 200;
    
    charCounter.textContent = `${currentLength}/${maxLength}`;
    
    // Change color based on character count
    if (currentLength >= maxLength) {
        charCounter.classList.remove('text-text-muted', 'text-yellow-400');
        charCounter.classList.add('text-red-400');
    } else if (currentLength >= maxLength * 0.9) {
        charCounter.classList.remove('text-text-muted', 'text-red-400');
        charCounter.classList.add('text-yellow-400');
    } else {
        charCounter.classList.remove('text-yellow-400', 'text-red-400');
        charCounter.classList.add('text-text-muted');
    }
}

// Event listeners
sendBtn.addEventListener('click', sendMessage);
chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
    }
});
chatInput.addEventListener('input', updateCharCounter);

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    initChat();
    chatInput.focus();
    updateCharCounter();
    
    // Add scroll to chat functionality
    const tryDemoChatBtn = document.getElementById('try-demo-chat-btn');
    if (tryDemoChatBtn) {
        tryDemoChatBtn.addEventListener('click', () => {
            const chatSection = document.getElementById('chat-section');
            if (chatSection) {
                chatSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // Focus on chat input after scrolling
                setTimeout(() => {
                    chatInput.focus();
                }, 500);
            }
        });
    }
    
    // Add navigation to avatar creation page for all avatar buttons
    const avatarButtons = [
        document.getElementById('create-avatar-btn-hero'),
        document.getElementById('create-avatar-btn-section')
    ];
    
    avatarButtons.forEach(btn => {
        if (btn) {
            btn.addEventListener('click', () => {
                window.location.href = '/avatar/';
            });
        }
    });
    
    // Handle feedback form submission
    const feedbackForm = document.getElementById('feedback-form');
    const feedbackMessage = document.getElementById('feedback-message');
    if (feedbackForm) {
        feedbackForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const feedbackText = document.getElementById('feedback-text').value.trim();
            
            if (!feedbackText) {
                feedbackMessage.textContent = 'Please enter your feedback.';
                feedbackMessage.className = 'text-sm text-red-400';
                feedbackMessage.classList.remove('hidden');
                return;
            }
            
            const submitBtn = feedbackForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            
            try {
                const response = await fetch('/api/feedback/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({
                        feedback: feedbackText
                    })
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    feedbackMessage.textContent = data.message;
                    feedbackMessage.className = 'text-sm text-green-400';
                    feedbackMessage.classList.remove('hidden');
                    feedbackForm.reset();
                } else {
                    feedbackMessage.textContent = data.error || 'An error occurred. Please try again.';
                    feedbackMessage.className = 'text-sm text-red-400';
                    feedbackMessage.classList.remove('hidden');
                }
            } catch (error) {
                feedbackMessage.textContent = 'An error occurred. Please try again.';
                feedbackMessage.className = 'text-sm text-red-400';
                feedbackMessage.classList.remove('hidden');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });
    }
    
    // Handle partner form submission
    const partnerForm = document.getElementById('partner-form');
    const partnerMessage = document.getElementById('partner-message');
    if (partnerForm) {
        partnerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('partner-email').value.trim();
            
            if (!email) {
                partnerMessage.textContent = 'Please enter your email address.';
                partnerMessage.className = 'text-sm text-red-400';
                partnerMessage.classList.remove('hidden');
                return;
            }
            
            const submitBtn = partnerForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            
            try {
                const response = await fetch('/api/partner/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({
                        email: email
                    })
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    partnerMessage.textContent = data.message;
                    partnerMessage.className = 'text-sm text-green-400';
                    partnerMessage.classList.remove('hidden');
                    partnerForm.reset();
                } else {
                    partnerMessage.textContent = data.error || 'An error occurred. Please try again.';
                    partnerMessage.className = 'text-sm text-red-400';
                    partnerMessage.classList.remove('hidden');
                }
            } catch (error) {
                partnerMessage.textContent = 'An error occurred. Please try again.';
                partnerMessage.className = 'text-sm text-red-400';
                partnerMessage.classList.remove('hidden');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });
    }
    
    // Helper function to get CSRF token
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
});
</script>
</body></html>